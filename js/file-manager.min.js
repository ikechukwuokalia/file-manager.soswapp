function populateDnav(){let e={},t=0;$.each(param,function(a,s){s.length>0&&(e[a]=s,++t)}),t>0&&$(document).find("#sos-dnav-wrap li a").each(function(t){if("#"!==$(this).attr("href")){let t=$(this).attr("href");$.each(e,function(e,a){url.parse(t,"pathname").indexOf(e)?"type"!==e&&(t=set_get(t,e,a)):t=set_get(t,e,a)}),$(this).attr("href",t)}})}"undefined"==typeof io&&(window.io={});const alterFile=(e=0,t="DELETE")=>{confirm(`Are you sure you want to ${t.toLowerCase()} this file?`)&&($("#file-mod-form input[name=fid]").val(e),$("#file-mod-form input[name=action]").val(t),$("#file-mod-form").submit())},rotateImage=(e=0,t=90)=>{confirm("Are you sure you want to rotate this image?")&&($("#file-mod-form input[name=fid]").val(e),$("#file-mod-form input[name=action]").val("ROTATE"),$("#file-mod-form input[name=degree]").val(t),$("#file-mod-form").submit())},fetchFiles=e=>{e&&"0.0"==e.status&&e.files.length>0?($("#file-list").removeClass("no-file"),$("#file-pages, .pages").text(e.pages),$("#file-records").text(e.records),$("#file-page").val(e.page),$(".page").text(e.page),$("#file-limit").val(e.limit),e.has_next_page&&$("#file-next-page").data("page",e.next_page),e.has_previous_page&&$("#file-previous-page").data("page",e.previous_page),$("#file-list").listFiles(e.files),removeAlert()):($("#file-pages, .pages").text(0),$(".page").text(0),$("#file-list").html("").addClass("no-file"))};$.fn.listFiles=function(e){return!1},$.fn.pageFile=function(){let e=parseInt($(this).data("page")),t=parseInt($("#file-page").val());e>0&&e!==t&&($("#file-page").val(e),$("#file-query-form").submit())};const pConf=sos.config.page;function listFiles(e){let t=$(pConf.datacontainer);if(t.length>0&&e.length>0){t.removeClass("no-result");let a="";$.each(e,function(e,t){a+='<div class="grid-6-phone grid-4-tablet grid-3-laptop push-left">',a+=`<div class="file-box thumb ${t.type_group}">`,a+=`<div class="thumb-icon-wrap"> <a href="#" onclick="sos.fbx.url('/app/ikechukwuokalia/file-manager.soswapp/service/file-viewer.php', {fid:${t.id}},{exitBtn:true});"><span class="thumb-icon"></span></a> </div>`,"image"===t.type_group&&(a+=`<a href="#" onclick="sos.fbx.url('/app/ikechukwuokalia/file-manager.soswapp/service/file-viewer.php', {fid:${t.id}},{exitBtn:true});"> <img src="${setGet(t.url,{tn:(new Date).getTime(),getsize:"320"})}" alt="${t.min_caption}"> </a>`),a+='<div class="thumb-caption">',a+='<button class="expand-tool sos-btn blue show-phone show-tablet" onclick="$(this).parent().toggleClass(\'xpand\');"> <i class="fas fa-expand-alt fa-lg"></i></button>',a+=`<h3 class="fw-lighter">${t.min_caption}</h3>`,a+='<p class="btn-stack">',""!==param.set_as&&param.set_as!==t.set_as&&(a+=`<button onclick="sos.fbx.url('/app/ikechukwuokalia/file-manager.soswapp/service/set-default.php',{set_as : '${param.set_as}', set_user : '${param.set_user}', callback : '${param.set_cb}', fid : ${t.id}, set_ttl : '${param.set_ttl}'},{exitBtn : true});" title="Set as ${param.set_ttl}" class="file-action sos-btn green"> <i class="fas fa-check-circle"></i> <span class="btn-text">Set as</span></button>`),t.set_as&&(a+=`<button onclick="sos.fbx.url('/app/ikechukwuokalia/file-manager.soswapp/service/unset-default.php',{callback : 'requery', fid : ${t.id}},{exitBtn : true});" title="Unset default" class="file-action sos-btn grey"> <i class="far fa-circle"></i> <span class="btn-text">Unset</span></button>`),0==t.locked&&(a+=`<button onclick="sos.fbx.url('/app/ikechukwuokalia/file-manager.soswapp/service/set-caption.php',{fid:${t.id}, callback : 'requery'},{exitBtn: true});" class="file-action sos-btn blue"> <i class="fas fa-edit"></i> <span class="btn-text">Edit caption</span></button>`,"image"==t.type_group&&(a+=`<button onclick="goCrop(${t.id},{crp_cb:'requery'})" class="file-action sos-btn blue"> <i class="fas fa-crop"></i> <span class="btn-text">Crop image</span></button>`,0==t.watermarked&&t.can_watermark,a+=`<button onclick="rotateImage(${t.id},90);" class="file-action sos-btn yellow"> <i class="fas fa-undo"></i> <span class="btn-text">Rotate</span></button>`,a+=`<button onclick="rotateImage(${t.id},-90);" class="file-action sos-btn yellow"> <i class="fas fa-redo"></i> <span class="btn-text">Rotate</span></button>`),a+=`<button onclick="alterFile(${t.id}, 'LOCK');" class="file-action sos-btn black"> <i class="fas fa-lock"></i> <span class="btn-text">Lock file</span></button>`),t.set_as||(a+=`<button onclick="alterFile(${t.id}, 'DELETE');" class="file-action sos-btn red"> <i class="fas fa-trash"></i> <span class="btn-text">Delete</span></button>`),a+="</p>",a+="</div>",a+="</div>",a+="</div>"}),t.html(a)}}window.requery=function(){$("#query-form").length>0&&$("#query-form").submit()};