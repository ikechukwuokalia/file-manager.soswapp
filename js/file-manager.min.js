function populateDnav(){console.log("populating");let e={},t=0;$.each(param,function(a,i){i.length>0&&(e[a]=i,++t)}),t>0&&$(document).find("#sos-dnav-wrap li a").each(function(t){if("#"!==$(this).attr("href")){let t=$(this).attr("href");$.each(e,function(e,a){url.parse(t,"pathname").indexOf(e)?"type"!==e&&(t=set_get(t,e,a)):t=set_get(t,e,a)}),$(this).attr("href",t)}})}function handleCrop(e){"0.0"!==e.status&&0!==object_length(e.errors)||(sos.fbx.close(),"function"==typeof window[param.crp_cb]&&window[param.crp_cb](e))}function goCrop(e,t={}){let a={fid:e,crp_ratio:param.crp_ratio,crp_cb:param.crp_cb,crp_select:param.crp_select,crp_minwidth:param.crp_minwidth};object_length(t)>0&&$.each(t,function(e,t){a[e]=t}),sos.fbx.url("/app/ikechukwuokalia/file-manager.soswapp/service/crop-image.php",a,{exitBtn:!0})}"undefined"==typeof io&&(window.io={}),window.handleUpload=function(e){if(sos.fbx.close(),void 0!==e.uploaded_files&&1===object_length(e.uploaded_files)){let t=[];$.each(e.uploaded_files,function(e,a){"image"==a.group&&t.push(a.id)}),1===object_length(t)&&setTimeout(function(){goCrop(t[0])},550)}};const deleteFile=e=>{confirm("Are you sure you want to delete this domain?")&&($("#file-delete-form input[name=id]").val(e),$("#file-delete-form").submit())},fetchFiles=e=>{e&&"0.0"==e.status&&e.files.length>0?($("#file-list").removeClass("no-file"),$("#file-pages, .pages").text(e.pages),$("#file-records").text(e.records),$("#file-page").val(e.page),$(".page").text(e.page),$("#file-limit").val(e.limit),e.has_next_page&&$("#file-next-page").data("page",e.next_page),e.has_previous_page&&$("#file-previous-page").data("page",e.previous_page),$("#file-list").listFiles(e.files),removeAlert()):($("#file-pages, .pages").text(0),$(".page").text(0),$("#file-list").html("").addClass("no-file"))};if($.fn.listFiles=function(e){return!1},$.fn.pageFile=function(){let e=parseInt($(this).data("page")),t=parseInt($("#file-page").val());e>0&&e!==t&&($("#file-page").val(e),$("#file-query-form").submit())},void 0==typeof window.pConf)sos.config.page;function checkPost(e={}){e&&"0.0"===e.status&&setTimeout(function(){removeAlert(),requery()},1800)}function listFiles(e){let t=$(pConf.datacontainer);if(t.length>0&&e.length>0){t.removeClass("no-result");let a="";$.each(e,function(e,t){a+='<div class="grid-6-phone grid-4-tablet grid-3-laptop push-left">',a+=`<div class="file-box thumb ${t.type_group}">`,a+=`<div class="thumb-icon-wrap"> <a href="#" onclick="sos.fbx.url('${location.origin}/file-manager/file-viewer', {fid:${t.id}},{exitBtn:true});"><span class="thumb-icon"></span></a> </div>`,"image"===t.type_group&&(a+=`<a href="#" onclick="sos.fbx.url('${location.origin}/file-manager/file-viewer', {fid:${t.id}},{exitBtn:true});"> <img src="${t.url}" alt="${t.min_caption}"> </a>`),a+='<div class="thumb-caption">',a+='<button class="expand-tool sos-btn blue show-phone show-tablet" onclick="$(this).parent().toggleClass(\'xpand\');"> <i class="fas fa-expand-alt fa-lg"></i></button>',a+=`<h3 class="fw-lighter">${t.min_caption}</h3>`,a+='<p class="btn-stack">',""!==param.set_as&&(a+=`<button onclick="sos.fbx.url('',{set_as : '${param.set_as}', set_cb : '${param.set_cb}', file : ${t.id}},{exitBtn : true});" title="Set as ${param.set_ttl}" class="file-action sos-btn green"> <i class="fas fa-check-circle"></i> <span class="btn-text">Set as</span></button>`),0==t.locked&&(a+=`<button onclick="sos.fbx.url('${location.origin}/file-manager/set/file-caption',{fid:${t.id}},{exitBtn: true});" class="file-action sos-btn blue"> <i class="fas fa-edit"></i> <span class="btn-text">Edit caption</span></button>`,"image"==t.type_group&&(a+=`<button onclick="goCrop(${t.id},{crp_cb:'requery'})" class="file-action sos-btn blue"> <i class="fas fa-crop"></i> <span class="btn-text">Crop image</span></button>`,0==t.watermarked&&1==t.can_watermark&&(a+=`<button onclick="watermarkFile(${t.id});" class="file-action sos-btn black"> <i class="fas fa-sign"></i> <span class="btn-text">Watermark</span></button>`),a+=`<button onclick="rotateImage(${t.id},-90);" class="file-action sos-btn yellow"> <i class="fas fa-undo"></i> <span class="btn-text">Rotate</span></button>`,a+=`<button onclick="rotateImage(${t.id},90);" class="file-action sos-btn yellow"> <i class="fas fa-redo"></i> <span class="btn-text">Rotate</span></button>`),a+=`<button onclick="lockFile(${t.id});" class="file-action sos-btn black"> <i class="fas fa-lock"></i> <span class="btn-text">Lock file</span></button>`),a+=`<button onclick="deleteFile(${t.id});" class="file-action sos-btn red"> <i class="fas fa-trash"></i> <span class="btn-text">Delete</span></button>`,a+="</p>",a+="</div>",a+="</div>",a+="</div>"}),t.html(a)}}if(void 0==typeof window.requery&&(window.requery=function(){$("#query-form").length>0&&$("#query-form").submit()}),"undefined"==typeof doFetch);if(void 0==typeof pageNatr);if(void 0==typeof pageTo);function doPost(e={}){(e&&"0.0"==e.status||e.errors.length<1)&&("callback"in param&&"function"==typeof window[param.callback]?(faderBox.close(),window[param.callback](e)):setTimeout(function(){faderBox.close(),removeAlert(),requery()},1500))}